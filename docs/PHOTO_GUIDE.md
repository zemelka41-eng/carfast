# Гайд: как готовить фото для сайта

Этот документ объясняет, какие форматы фото поддерживаются, рекомендуемые размеры и как правильно называть файлы.

---

## 1) Поддерживаемые форматы

Сайт принимает следующие форматы изображений:
- **JPEG** (`.jpg`, `.jpeg`) — для фотографий товаров
- **PNG** (`.png`) — для логотипов и изображений с прозрачностью
- **WebP** (`.webp`) — современный формат, хорошая компрессия
- **JFIF** (`.jfif`) — разновидность JPEG, **технически поддерживается, но рекомендуется конвертировать в `.jpg` или `.webp`**

**Чётко о форматах:**
- **Разрешённые расширения:** `.jpg`, `.jpeg`, `.png`, `.webp`, `.jfif`
- **Рекомендуемые:** `.jpg` (для фото), `.png` (для логотипов с прозрачностью), `.webp` (для оптимизации)
- **Про `.jfif`:** Формат `.jfif` технически поддерживается системой (это разновидность JPEG), но для лучшей совместимости, оптимизации и предсказуемого поведения **рекомендуется конвертировать `.jfif` файлы в `.jpg` или `.webp`** перед загрузкой. Если у вас есть `.jfif` файлы из мессенджеров или мобильных устройств, используйте графический редактор (Photoshop, GIMP, онлайн-конвертеры) для преобразования.

---

## 2) Рекомендации по размерам

### Фото товаров (ProductImage)

**Конкретные рекомендации для карточек товаров:**
- **Размер:** 1600×900 пикселей (16:9) — оптимально
- **Допустимо:** 1200×675 пикселей (минимум)
- **Вес файла:** 300–600 КБ (оптимально), максимум 10 МБ
- **Формат:** JPG качество 80–85% или WebP (для лучшей компрессии)
- **Альтернатива:** PNG только если нужна прозрачность (для логотипов/иконок)

**Важно:** Для лучшего вида в каталоге рекомендуем готовить фото в формате 16:9 (1600×900). Если фото имеет другое соотношение сторон (например, вертикальное), карточка покажет его целиком за счёт `object-fit: contain` — изображение будет помещено в рамку 16:9 с полями по бокам или сверху/снизу.

### Логотипы брендов (Series.logo)
- **Рекомендуется:** 512×512 пикселей (квадрат) или 600×300 пикселей (широкий)
- **Формат:** PNG/WebP с прозрачностью (для логотипов)
- **Фон:** Прозрачный или белый/чёрный в зависимости от дизайна
- **Вес файла:** ≤200 KB

### Титульные фото категорий (Category.cover_image)
- **Оптимально:** 1600×900 пикселей (соотношение 16:9) или 1600×600 пикселей (под дизайн карточек)
- **Минимум:** 1200×675 пикселей
- **Формат:** JPEG качество 80–85% или WebP
- **Вес файла:** ≤500 KB
- **Использование:** Обложка с overlay/градиентом для читаемого текста

---

## 3) Как называть файлы

**Правила:**
- Используйте только **латиницу** (a-z, A-Z)
- Используйте **нижний регистр** (строчные буквы)
- **Без пробелов** — используйте дефисы или подчёркивания
- **Без специальных символов** — только буквы, цифры, дефисы и подчёркивания

**Примеры правильных имён:**
- `shacman_l3000_4x2_01.jpg`
- `dayun_logo.png`
- `category_samosvaly_cover.jpg`
- `samosval_2023_side.jpg`

**Примеры неправильных имён:**
- `Фото товара.jpg` (кириллица)
- `Product Photo.JPG` (пробелы и верхний регистр)
- `image@2023#1.jpg` (специальные символы)

---

## 4) Как загружать фото в админке

### Фото товара (ProductImage)
1. Админка → **Catalog → Product** → откройте нужный товар
2. Внизу страницы — блок **Product images**
3. Добавьте строку:
   - **image** — выберите файл
   - **order** — порядок отображения (0 = главное фото, которое показывается в карточке)
   - **alt_ru** — текст для атрибута alt (для SEO и доступности)
4. Сохраните товар

**Совет:** Первое фото (order=0) будет главным и показывается в каталоге. Если у товара больше одного фото, в карточке появится бейдж "+N фото", а на детальной странице — карусель со всеми фото.

### Логотип бренда (Series.logo)
1. Админка → **Catalog → Series** → откройте нужный бренд
2. Поле **Logo** — загрузите файл (PNG/WebP с прозрачностью, 512×512 или 600×300, ≤200 KB)
3. Поле **Logo alt (RU)** — текст для атрибута alt (если пусто, используется название бренда)
4. Сохраните

**Важно:** Если логотипа нет — на сайте не будет показан текст "Логотип бренда", только нейтральная заглушка или изображение будет скрыто.

### Титульное фото категории (Category.cover_image)
1. Админка → **Catalog → Category** → откройте нужную категорию
2. Поле **Cover image** — загрузите файл (1600×900 или 1600×600, ≤500 KB, JPG quality 80–85 или WebP)
3. Поле **Cover alt (RU)** — текст для атрибута alt (если пусто, используется название категории)
4. Сохраните

**Важно:** Если cover_image нет — используется fallback на текущий "тёмный" дизайн без картинки. При наличии изображения накладывается градиент/overlay для читаемости текста.

---

## 5) Что делать, если фото не загружается

### Ошибка "disallowed extension"
- Проверьте формат файла — должен быть `.jpg`, `.jpeg`, `.jfif`, `.png` или `.webp`
- Если у вас `.jfif`, он поддерживается, но убедитесь, что файл действительно JPEG

### Ошибка "exceeds maximum size"
- Максимальный размер файла — 10 МБ
- Сожмите фото в графическом редакторе (например, Photoshop, GIMP, онлайн-компрессоры)
- Для JPEG используйте качество 80–85%

### Ошибка "disallowed content type"
- Файл может иметь правильное расширение, но неправильный MIME-тип
- Попробуйте пересохранить фото в графическом редакторе
- Для `.jfif` файлов убедитесь, что это действительно JPEG-изображение

---

## 6) Рекомендации по обработке фото

### Перед загрузкой:
1. **Обрежьте фото** до нужного соотношения сторон (4:3 для товаров, 16:9 для категорий)
2. **Оптимизируйте размер** — уменьшите до рекомендуемых размеров
3. **Сожмите файл** — для JPEG используйте качество 80–85%
4. **Переименуйте файл** по правилам (латиница, нижний регистр, без пробелов)

### Инструменты:
- **Онлайн:** TinyPNG, Squoosh, ImageOptim
- **Десктоп:** Photoshop, GIMP, ImageMagick
- **Командная строка:** `convert` (ImageMagick), `jpegoptim`, `pngquant`

---

## 7) Проверка после загрузки

После загрузки фото проверьте:
1. **На сайте:** откройте карточку товара — фото должно отображаться корректно
2. **В админке:** превью должно показываться правильно
3. **Размер файла:** убедитесь, что файл не слишком большой (оптимально < 500 КБ для товаров)

---

## 8) Частые вопросы

**Q: Можно ли загружать `.jfif` файлы?**  
A: Да, формат `.jfif` поддерживается и обрабатывается как JPEG.

**Q: Нужно ли конвертировать `.jfif` в `.jpg`?**  
A: Нет, можно загружать `.jfif` напрямую. Если возникают проблемы, попробуйте пересохранить файл как `.jpg` в графическом редакторе.

**Q: Сколько фото можно загрузить на один товар?**  
A: Ограничений нет, но рекомендуется 3–10 фото для хорошего представления товара.

**Q: Какой порядок фото лучше?**  
A: Первое фото (order=0) — главное, показывается в каталоге. Остальные — дополнительные виды (сбоку, сзади, детали).

---

## 9) Технические детали

- **Валидация:** Проверка формата и размера происходит на уровне middleware перед сохранением
- **Хранение:** Фото товаров хранятся в `media/products/`, логотипы — в `media/brands/`, обложки категорий — в `media/categories/`
- **Обработка:** Django автоматически обрабатывает загруженные файлы и создаёт записи в БД

